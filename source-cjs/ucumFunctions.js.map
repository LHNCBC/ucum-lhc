{"version":3,"file":"ucumFunctions.js","names":["UcumFunctions","constructor","funcs","cnvTo","x","cnvFrom","Math","log","LN10","pow","exp","LN2","tan","atan","sqrt","func","forName","fname","toLowerCase","f","Error","isDefined","_default","exports","default"],"sources":["../source/ucumFunctions.js"],"sourcesContent":["/*\n * This class manages the special functions used by some units.\n *\n * @author Lee Mericle, based on java version by Gunther Schadow\n *\n */\n\nclass UcumFunctions {\n\n  /**\n   * Constructor\n   *\n   * Creates the singleton object that contains the list of functions used\n   * to convert special units.\n   */\n  constructor() {\n\n    // Create the hash containing the function pairs\n    this.funcs = {};\n\n    // Celsius - convert to Celsius from kelvin and from Celsius to kelvin\n    // where kelvin is the base unit for temperature\n    this.funcs['cel'] = {cnvTo   : function(x){return x - 273.15;},\n                      cnvFrom : function(x){return x + 273.15;}};\n\n    // Fahrenheit - convert to Fahrenheit from kelvin and from Fahrenheit to\n    // kelvin - which is the base unit for temperature\n    this.funcs['degf'] = {cnvTo   : function(x){return x - 459.67;},\n                       cnvFrom : function(x){return x + 459.67;}};\n\n    // Reaumur - convert between Reaumur and Kelvin.   Because of the way the\n    // calling code in the Units class is set up (in the convertFrom method),\n    // what is given here as the convertTo function is actually the convert\n    // from method and vice versa.\n    //this.funcs['degre'] = {cnvTo   : function(x){return x + 273.15;},\n    //                    cnvFrom : function(x){return x - 273.15;}};\n    this.funcs['degre'] = {cnvTo   : function(x){return x - 273.15;},\n                        cnvFrom : function(x){return x + 273.15;}};\n\n    // pH - convert to pH from moles per liter and from moles per liter to pH\n    // where a mole is an amount of a substance (a count of particles)\n    this.funcs['ph'] = {cnvTo  : function(x){return - Math.log(x) / Math.LN10;},\n                     cnvFrom : function(x){return Math.pow(10, -x);}};\n\n    // ln - natural logarithm (base e 2.71828) - apply (cnvTo) and invert (cnvFrom)\n    // and 2ln - two times the natural logarithm\n    this.funcs['ln'] = {cnvTo : function(x){return Math.log(x);},\n                     cnvFrom : function(x){return Math.exp(x);}};\n    this.funcs['2ln'] = {cnvTo : function(x){return 2 * Math.log(x);},\n                      cnvFrom : function(x){return Math.exp(x / 2);}};\n\n    // lg - the decadic logarithm (base 10)\n    this.funcs['lg'] = {cnvTo : function(x){return Math.log(x) / Math.LN10;},\n                     cnvFrom : function(x){return Math.pow(10, x);}};\n    this.funcs['10lg'] = {cnvTo : function(x){return 10 * Math.log(x)/Math.LN10;},\n                       cnvFrom : function(x){return Math.pow(10, x / 10);}};\n    this.funcs['20lg'] = {cnvTo : function(x){return 20 * Math.log(x)/Math.LN10;},\n                       cnvFrom : function(x){return Math.pow(10, x / 20);}};\n    // The plain text ucum units file uses '2lg'\n    this.funcs['2lg'] = {cnvTo : function(x){return 2 * Math.log(x)/Math.LN10;},\n                           cnvFrom : function(x){return Math.pow(10, x / 2);}};\n    // The xml essence ucum file uses lgTimes2\n    this.funcs['lgtimes2'] = this.funcs['2lg'];\n\n    // ld - dual logarithm (base 2)\n    this.funcs['ld'] = {cnvTo : function(x){return Math.log(x)/Math.LN2;},\n                     cnvFrom : function(x){return Math.pow(2, x);}};\n\n    // tan - tangent\n    this.funcs['100tan'] = {cnvTo : function(x){return Math.tan(x) * 100;},\n                         cnvFrom : function(x){return Math.atan(x/100);}};\n    // the xml essence ucum file uses both 100tan and tanTimes100\n    this.funcs['tanTimes100'] = this.funcs['100tan'] ;\n\n    // sqrt - square root\n    this.funcs['sqrt'] = {cnvTo : function(x){return Math.sqrt(x);},\n                       cnvFrom : function(x){return x*x;}};\n\n    // inv - inverse\n    this.funcs['inv'] = {cnvTo : function(x){return 1.0 / x;},\n                      cnvFrom : function(x){return 1.0 / x;}};\n\n    // homeopathic potency functions\n    this.funcs['hpX'] = {cnvTo : function(x){return -(this.funcs['lg'](x));},\n                      cnvFrom : function(x){return Math.pow(10, -x);}};\n\n    this.funcs['hpC'] = {cnvTo : function(x){\n                              return -(this.func['ln'](x))/this.funcs['ln'](100);},\n                       cnvFrom : function(x){return Math.pow(100, -x);}};\n\n    this.funcs['hpM'] = {cnvTo : function(x){\n                              return -(this.funcs['ln'](x))/this.funcs['ln'](1000);},\n                      cnvFrom : function(x){return Math.pow(1000, -x);}};\n\n    this.funcs['hpQ'] = {cnvTo : function(x){\n                              return -(this.funcs['ln'](x))/this.funcs['ln'](50000);},\n                      cnvFrom : function(x){return Math.pow(50000, -x);}};\n\n  } // end of constructor\n\n\n  /**\n   * Returns the function with the name specified\n   *\n   * @param fname name of the function to be returned\n   * @return the function with the specified name\n   * @throws an error message if the function is not found\n   */\n  forName(fname) {\n    fname = fname.toLowerCase();\n\n    let f = this.funcs[fname] ;\n    if (f === null)\n      throw(new Error(`Requested function ${fname} is not defined`));\n    return f;\n  }\n\n\n  /**\n   * Returns a flag indicating whether or not the function has been\n   * defined.\n   *\n   * @param fname name of the function in question\n   * @return true if it has been defined; false if not\n   */\n  isDefined(fname) {\n    fname = fname.toLowerCase();\n    return this.funcs[fname] !== null;\n  }\n\n} // end of UcumFunctions class\n\nexport default new UcumFunctions(); // one singleton instance\n"],"mappings":"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"}