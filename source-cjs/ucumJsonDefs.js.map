{"version":3,"sources":["../source/ucumJsonDefs.js"],"names":["Pfx","require","PfxT","Un","Utab","unpackArray","UcumJsonDefs","loadJsonDefs","jsonDefs","prefixes","units","UnitTables","getInstance","unitsCount","pTab","PrefixTables","plen","length","p","newPref","Prefix","add","uTab","ulen","u","newUnit","Unit","addUnit","ucumJsonDefs"],"mappings":";;;;;;;AAAA;;;;;;;AAQA,IAAIA,GAAG,GAAGC,OAAO,CAAC,aAAD,CAAjB;;AACA,IAAIC,IAAI,GAAGD,OAAO,CAAC,mBAAD,CAAlB;;AACA,IAAIE,EAAE,GAAGF,OAAO,CAAC,WAAD,CAAhB;;AACA,IAAIG,IAAI,GAAGH,OAAO,CAAC,iBAAD,CAAlB;;AACA,IAAII,WAAW,GAAGJ,OAAO,CAAC,oBAAD,CAAP,CAA8BI,WAAhD;;AAEO,MAAMC,YAAN,CAAmB;AAExB;;;;;;AAMAC,EAAAA,YAAY,GAAG;AACb;AACA,UAAMC,QAAQ,GAAGP,OAAO,CAAC,2BAAD,CAAxB;;AACAO,IAAAA,QAAQ,CAACC,QAAT,GAAoBJ,WAAW,CAACG,QAAQ,CAACC,QAAV,CAA/B;AACAD,IAAAA,QAAQ,CAACE,KAAT,GAAiBL,WAAW,CAACG,QAAQ,CAACE,KAAV,CAA5B;;AAEA,QAAIN,IAAI,CAACO,UAAL,CAAgBC,WAAhB,GAA8BC,UAA9B,OAA+C,CAAnD,EAAsD;AAEpD,UAAIC,IAAI,GAAGZ,IAAI,CAACa,YAAL,CAAkBH,WAAlB,EAAX;AACA,UAAIH,QAAQ,GAAGD,QAAQ,CAAC,UAAD,CAAvB;AACA,UAAIQ,IAAI,GAAGP,QAAQ,CAACQ,MAApB;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAApB,EAA0BE,CAAC,EAA3B,EAA+B;AAC7B,YAAIC,OAAO,GAAG,IAAInB,GAAG,CAACoB,MAAR,CAAeX,QAAQ,CAACS,CAAD,CAAvB,CAAd;AACAJ,QAAAA,IAAI,CAACO,GAAL,CAASF,OAAT;AACD;;AAED,UAAIG,IAAI,GAAGlB,IAAI,CAACO,UAAL,CAAgBC,WAAhB,EAAX;AACA,UAAIF,KAAK,GAAGF,QAAQ,CAAC,OAAD,CAApB;AACA,UAAIe,IAAI,GAAGb,KAAK,CAACO,MAAjB;;AAEA,WAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAApB,EAA0BC,CAAC,EAA3B,EAA+B;AAC7B,YAAIC,OAAO,GAAG,IAAItB,EAAE,CAACuB,IAAP,CAAYhB,KAAK,CAACc,CAAD,CAAjB,CAAd;AACAF,QAAAA,IAAI,CAACK,OAAL,CAAaF,OAAb;AACD;AACF,KAzBY,CAyBX;;AACH,GAlCuB,CAkCtB;;;AAlCsB,C,CAoCxB;;;;AAEF,IAAIG,YAAY,GAAG,IAAItB,YAAJ,EAAnB","sourcesContent":["/**\n * This class handles opening, reading and loading the JSON file of ucum\n * definitions (prefixes, base units, and unit atoms).\n *\n * @author Lee Mericle\n *\n */\n\nvar Pfx = require(\"./prefix.js\");\nvar PfxT = require(\"./prefixTables.js\");\nvar Un = require(\"./unit.js\");\nvar Utab = require('./unitTables.js');\nvar unpackArray = require('./jsonArrayPack.js').unpackArray;\n\nexport class UcumJsonDefs {\n\n  /**\n   * This method loads the JSON prefix and unit objects into the prefix and\n   * unit tables.\n   *\n   * @returns nothing\n   */\n  loadJsonDefs() {\n    // requiring the file will take care of opening it for use\n    const jsonDefs = require('../data/ucumDefs.min.json');\n    jsonDefs.prefixes = unpackArray(jsonDefs.prefixes);\n    jsonDefs.units = unpackArray(jsonDefs.units);\n\n    if (Utab.UnitTables.getInstance().unitsCount() === 0) {\n\n      let pTab = PfxT.PrefixTables.getInstance();\n      let prefixes = jsonDefs[\"prefixes\"];\n      let plen = prefixes.length;\n\n      for (let p = 0; p < plen; p++) {\n        let newPref = new Pfx.Prefix(prefixes[p]);\n        pTab.add(newPref);\n      }\n\n      let uTab = Utab.UnitTables.getInstance();\n      let units = jsonDefs[\"units\"];\n      let ulen = units.length;\n\n      for (let u = 0; u < ulen; u++) {\n        let newUnit = new Un.Unit(units[u]);\n        uTab.addUnit(newUnit);\n      }\n    } // end if the data has not already been loaded\n  } // end loadJsonDefs\n\n} // end UcumJsonDefs class\n\nvar ucumJsonDefs = new UcumJsonDefs();\nexport {ucumJsonDefs};\n"],"file":"ucumJsonDefs.js"}